# DB설계
## 1. 목적
프로젝트, 명세서 등의 정보 요구사항에 대한 정확한 이해
분석자, 개발자, 사용자간의 원할한 의사소통 수단
데이터 중심의 분석 방법
현행 시스템만이 아닌 신규 시스템 개발의 기초 제공

## 2. 설계를 위한 요구사항 분석
DB에 대한 사용자의 요구사항 수집,문석 해서 요구사항(기능) 명세서 작성
ex) 회원가입하려면 ~를 입력해야한다, 이메일을 작성은 선택이다.

## 3. 개념적 설계
작성한 요구사항 명세서에서 DB를 구성하는데 필요한 개체, 속성, 개체간의 관계 추출하여 ERD 생성
- 개체(Entity)와 속성(Attribute)을 추출
   - 대부분 명사로 선별
   - 요구사항에서 개체는 대부분 명사지만 속성과 구별하여 추출
   - ex) 회원(E)으로 가입하려면 아이디(A),비밀번호(A),성명(A),신용카드(E) 정보를 입력해야한다.
		회원의 신용카드(E) 정보는 신용카드 번호(A), 유효기간(A)을 저장할수있다.
- 개체간의 관계(Relationship)를 추출
   - 대부분 동사로 선별(개체간 관계를 나타내는 동사)
   - 개체 간의 관계는 여러가지로 분류해서 정의 된다.
   - 관계에 대한 속성 존재
   - 1:1, 1:N, N:M
   - 필수적 참여, 선택적 참여
   - ex) 회원정보는 (여러개를 저장)할수있다.
		(한 좌석은 회원 한명만 예약)할수있다.
- ERD 생성 (IE 표기법 숙지 필수)

## 4. 논리적 설계
- 모든 개체는 릴레이션(Table)으로 변환
	- 개체 -> 테이블 , 속성 -> 테이블의 속성
- N:M 관계는 릴레이션(Table)으로 변환
	- 관계 -> 릴레이션 이름, 관계 속성 -> 릴레이션 속성
- 1:N 관계는 외래키(FK)로 표현
	- 일반적으로 1:N 관계에서 1측 개체의 기본키를 N측 릴레이션에 포함시키고 외래키(FK)로 지정
- 1:1 관계는 외래키(FK)로 표현
	- 일반적 1:1 관계는 외래키를 서로 주고받는다
- 다중 값 속성은 독립 릴레이션(Table)으로 변환
	- 릴레이션에서는 다중 값 속성을 가질 수 없으므로 다중 값 속성은 별도의 릴레이션으로 생성해야 함

## 5. 물리적 스키마 및 구현
ERD를 실제 테이블로 생성한다.

## 반정규화(역정규화)
정규화된 엔티티타입, 속성, 관계를 시스템의 성능향상, 개발과 운영의 단순화를 위해 모델을 통합하는 프로세스.
DB성능 향상을 위해, 데이터 중복을 허용하고 조인을 줄이는 DB 성능 향상 방법.

단점
정규화모델 -  SQL 작성이 용이하지 않고 과다한 테이블 조인이 발생하여 성능이 저하될 가능성이 높다.
반정규화모델 - 같은 데이터가 여러 테이블에 걸쳐 존재하므로 무결성이 깨질 우려가 있다.

1:1 관계의 테이블 병합
1:N 관계의 테이블 병합
슈퍼/서브 타입 테이블 병합
수직 분할 (집중화된 일부 컬럼 분리)
수평 분할 (행으로 구분하여 구간별 분리)
테이블 추가 (중복테이블, 통계테이블, 이력테이블, 부분테이블)

### 대표적 반정규화

##### 컬럼 반정규화
중복컬럼 추가(자주 조회하는 컬럼이 있는경우)
파생 컬럼 추가 (미리 계산한 값)
PK에의한 컬럼 추가
응용시스템 오작동을 방지하기 위한 컬럼 추가(이전 데이터 임시 보관)

##### 관계 반정규화
중복 관계 추가(A테이블에서 C테이블의 정보를 읽을 수 있는 관계가 있음에도 관계를 중복하여 조회(Read) 경로를 단축)
ex) A-B-D-C 경로로 A에서 C를 읽을 수 있지만 경로단축을 위해 A-C경로 관계를 추가한다

*정규화와 반정규화는 그때그때 다르다. 개념을 잘 알고 적절하게 쓰는게 중요하다.

